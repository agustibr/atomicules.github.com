---
layout: archive
title: Archives
---

<ul id="archives">
{% assign postcount = 1 %}{% comment %}Best initialise this{% endcomment %}
{% for post in site.posts %}
	{% comment %}This closes the nested list if a new month has begun, unless it's the very first post of course.{% endcomment %}
	{% capture thispostmonth %}{{ post.date | date: "%B" }}{% endcapture %}
	{% if thispostmonth != lastpostmonth %}
		{% unless forloop.first %}
		</ul>
		{{ postcount }}
	</li>
		{% endunless %}
	{% endif %}
	{% comment %}This opens the nested list for a new month or if its the very first post in the loop{% endcomment %}
	{% if forloop.first or lastpostmonth != thispostmonth %}
	{% postcount = 1 %}{% comment %}Start post count for month{% endcomment %}
	<li>{{post.date | date: "%B %Y"}}
		<ul>
	{% endif %}

	<li><a href="{{ post.url }}" title="{{ post.title }}"><span class="title">{{ post.title }}</span><span>{{ post.content | truncate: 200 }}</span><time datetime="{{ post.date | date: "%Y-%m-%d" }}">{{ post.date | date: "%d" }}</time></a></li>

	{% capture lastpostmonth %}{{ post.date | date: "%B" }}{% endcapture %}
	<!--{% postcount = postcount + 1 %}-->

{% endfor %}
</ul>
